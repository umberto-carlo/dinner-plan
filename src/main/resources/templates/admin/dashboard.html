<!DOCTYPE html>
<html th:replace="~{layout :: layout(title=#{admin.dashboard.title}, content=~{::content})}"
    xmlns:th="http://www.thymeleaf.org">

<head>
    <title th:text="#{admin.dashboard.title}">Admin Dashboard</title>
</head>

<body>
    <div th:fragment="content">
        <div class="content-container">
            <div style="margin-bottom: 1rem;">
                <a th:href="@{/}"
                    style="text-decoration: none; color: var(--text-secondary); display: inline-flex; align-items: center; gap: 0.5rem; font-weight: 500;">
                    <span>&larr;</span> <span th:text="#{app.back_dashboard}">Back to Dashboard</span>
                </a>
            </div>
            <h2 class="mb-4" th:text="#{admin.dashboard.title}">Admin Dashboard</h2>

            <!-- Alerts -->
            <div th:if="${success}" class="alert alert-success"
                style="padding: 1rem; background-color: #d4edda; color: #155724; border-radius: 4px; margin-bottom: 1rem;">
                <span th:text="${success}">Success message</span>
            </div>
            <div th:if="${error}" class="alert alert-danger"
                style="padding: 1rem; background-color: #f8d7da; color: #721c24; border-radius: 4px; margin-bottom: 1rem;">
                <span th:text="${error}">Error message</span>
            </div>

            <div class="grid">
                <!-- User Management Card -->
                <div class="card">
                    <h3 th:text="#{admin.users.card.title}">User Management</h3>
                    <p th:text="#{admin.users.card.desc}">Manage users, roles, and passwords.</p>
                    <a th:href="@{/admin/users}"
                        class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors cursor-pointer"
                        th:text="#{admin.users.btn}">Manage Users</a>
                </div>

                <!-- Database Management Card -->
                <div class="card" style="margin-top: 2rem;">
                    <h3 th:text="#{admin.db.card.title}">Database Backup & Restore</h3>
                    <p class="text-secondary" th:text="#{admin.db.card.desc}">Export the entire database to a ZIP file
                        regarding JSON data, or restore from a previous backup.</p>

                    <div style="display: flex; gap: 2rem; align-items: flex-start; margin-top: 1rem;">
                        <!-- Export -->
                        <div style="flex: 1;">
                            <h4 th:text="#{admin.export.title}">Export</h4>
                            <p th:text="#{admin.export.desc}">Download a full backup of the database.</p>
                            <a th:href="@{/admin/export}"
                                class="inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors cursor-pointer"
                                th:text="#{admin.export.btn}">Download Backup
                                (.zip)</a>
                        </div>

                        <!-- Import -->
                        <div style="flex: 1; border-left: 1px solid var(--border); padding-left: 2rem;">
                            <h4 th:text="#{admin.import.title}">Import</h4>
                            <p class="text-danger" style="font-weight: bold; color: #dc3545;"
                                th:text="#{admin.import.warning}">WARNING: Importing will overwrite all existing data!
                            </p>
                            <form th:action="@{/admin/import}" method="post" enctype="multipart/form-data"
                                th:onsubmit="'return confirm(\'' + #{admin.import.confirm} + '\');'">
                                <div style="margin-bottom: 1rem;">
                                    <input type="file" name="file" accept=".zip" required
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm dark:bg-gray-700 dark:text-white">
                                </div>
                                <button type="submit"
                                    class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors cursor-pointer"
                                    th:text="#{admin.import.btn}">Import & Overwrite</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>